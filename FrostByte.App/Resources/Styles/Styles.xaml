<?xml version="1.0" encoding="UTF-8"?>
<?xaml-comp compile="true" ?>

<ResourceDictionary
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <!-- ============================= -->
    <!-- CSS-derived color tokens      -->
    <!-- ============================= -->

    <!-- base page colors -->
    <Color x:Key="BodyBackground">#0F0F23</Color>
    <Color x:Key="BodyText">#CCCCCC</Color>

    <!-- links -->
    <Color x:Key="LinkNormal">#009900</Color>
    <Color x:Key="LinkHover">#99FF99</Color>

    <!-- inline code blocks -->
    <Color x:Key="CodeBorder">#333340</Color>
    <Color x:Key="CodeBackground">#10101A</Color>

    <!-- warnings & stars -->
    <Color x:Key="WarningActive">#FF0000</Color>
    <Color x:Key="Star">#FFFF66</Color>

    <!-- badges -->
    <Color x:Key="SupporterBadgeHover">#FFFFCC</Color>
    <Color x:Key="SponsorBadge">#79A2D8</Color>
    <Color x:Key="SponsorBadgeHover">#CCDBED</Color>

    <!-- controls -->
    <Color x:Key="ControlHoverBackground">#19193B</Color>
    <Color x:Key="ControlBorder">#666666</Color>
    <Color x:Key="TextWhite">#FFFFFF</Color>

    <!-- calendar -->
    <Color x:Key="CalendarDefaultText">#333333</Color>
    <Color x:Key="CalendarDayIncomplete">#666666</Color>
    <Color x:Key="CalendarDayLink">#CCCCCC</Color>
    <Color x:Key="CalendarHoverBackground">#1E1E46</Color>
    <Color x:Key="CalendarHoverOverlay">#337777A5</Color>

    <!-- puzzle input -->
    <Color x:Key="PuzzleInputBorder">#999999</Color>
    <Color x:Key="PuzzleInputBackground">#333333</Color>

    <!-- share widget -->
    <Color x:Key="ShareHover">#AAFFAA</Color>

    <!-- first-only state -->
    <Color x:Key="FirstOnly">#9999CC</Color>

    <!-- ============================= -->
    <!-- matching brushes             -->
    <!-- ============================= -->
    <SolidColorBrush x:Key="BodyBackgroundBrush" Color="{StaticResource BodyBackground}" />
    <SolidColorBrush x:Key="BodyTextBrush" Color="{StaticResource BodyText}" />
    <SolidColorBrush x:Key="LinkNormalBrush" Color="{StaticResource LinkNormal}" />
    <SolidColorBrush x:Key="LinkHoverBrush" Color="{StaticResource LinkHover}" />
    <SolidColorBrush x:Key="CodeBorderBrush" Color="{StaticResource CodeBorder}" />
    <SolidColorBrush x:Key="CodeBackgroundBrush" Color="{StaticResource CodeBackground}" />
    <SolidColorBrush x:Key="WarningActiveBrush" Color="{StaticResource WarningActive}" />
    <SolidColorBrush x:Key="StarBrush" Color="{StaticResource Star}" />
    <SolidColorBrush x:Key="SupporterBadgeHoverBrush" Color="{StaticResource SupporterBadgeHover}" />
    <SolidColorBrush x:Key="SponsorBadgeBrush" Color="{StaticResource SponsorBadge}" />
    <SolidColorBrush x:Key="SponsorBadgeHoverBrush" Color="{StaticResource SponsorBadgeHover}" />
    <SolidColorBrush x:Key="ControlHoverBackgroundBrush" Color="{StaticResource ControlHoverBackground}" />
    <SolidColorBrush x:Key="ControlBorderBrush" Color="{StaticResource ControlBorder}" />
    <SolidColorBrush x:Key="TextWhiteBrush" Color="{StaticResource TextWhite}" />
    <SolidColorBrush x:Key="CalendarDefaultTextBrush" Color="{StaticResource CalendarDefaultText}" />
    <SolidColorBrush x:Key="CalendarDayIncompleteBrush" Color="{StaticResource CalendarDayIncomplete}" />
    <SolidColorBrush x:Key="CalendarDayLinkBrush" Color="{StaticResource CalendarDayLink}" />
    <SolidColorBrush x:Key="CalendarHoverBackgroundBrush" Color="{StaticResource CalendarHoverBackground}" />
    <SolidColorBrush x:Key="CalendarHoverOverlayBrush" Color="{StaticResource CalendarHoverOverlay}" />
    <SolidColorBrush x:Key="PuzzleInputBorderBrush" Color="{StaticResource PuzzleInputBorder}" />
    <SolidColorBrush x:Key="PuzzleInputBackgroundBrush" Color="{StaticResource PuzzleInputBackground}" />
    <SolidColorBrush x:Key="ShareHoverBrush" Color="{StaticResource ShareHover}" />
    <SolidColorBrush x:Key="FirstOnlyBrush" Color="{StaticResource FirstOnly}" />

    <!-- ============================= -->
    <!-- your existing Styles file    -->
    <!-- ============================= -->

    <Style TargetType="ActivityIndicator">
        <!-- now spins in your “link” green -->
        <Setter Property="Color"
                Value="{AppThemeBinding Light={StaticResource LinkNormal},
                                      Dark={StaticResource LinkHover}}" />
    </Style>

    <Style TargetType="Border">
        <!-- always use the CSS input-border color -->
        <Setter Property="Stroke" Value="{StaticResource ControlBorder}" />
        <Setter Property="StrokeShape" Value="Rectangle" />
        <Setter Property="StrokeThickness" Value="1" />
    </Style>

    <Style TargetType="BoxView">
        <!-- general panels get the CSS code-block bg -->
        <Setter Property="BackgroundColor" Value="{StaticResource CodeBackground}" />
    </Style>

    <Style TargetType="Button">
        <!-- buttons are now your CSS link-green -->
        <Setter Property="TextColor"
                Value="{AppThemeBinding Light={StaticResource BodyText},
                                      Dark={StaticResource BodyText}}" />
        <Setter Property="BackgroundColor"
                Value="{AppThemeBinding Light={StaticResource LinkNormal},
                                      Dark={StaticResource LinkHover}}" />
        <Setter Property="FontFamily" Value="SourceCodePro" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="BorderWidth" Value="0" />
        <Setter Property="CornerRadius" Value="8" />
        <Setter Property="Padding" Value="14,10" />
        <Setter Property="MinimumHeightRequest" Value="44" />
        <Setter Property="MinimumWidthRequest" Value="44" />
    </Style>

    <!-- …and so on for each of your original Styles… -->

    <!-- ===== Updated Page/Shell/Nav/Tabbed to CSS background/text ===== -->

    <Style TargetType="Page" ApplyToDerivedTypes="True">
        <Setter Property="Padding" Value="0" />
        <Setter Property="BackgroundColor" Value="{StaticResource BodyBackground}" />
    </Style>

    <Style TargetType="Shell" ApplyToDerivedTypes="True">
        <Setter Property="BackgroundColor" Value="{StaticResource BodyBackground}" />
        <Setter Property="ForegroundColor" Value="{StaticResource BodyText}" />
        <Setter Property="TitleColor" Value="{StaticResource BodyText}" />
        <Setter Property="NavBarHasShadow" Value="False" />
        <Setter Property="TabBarBackgroundColor"
                Value="{StaticResource BodyBackground}" />
        <Setter Property="TabBarForegroundColor"
                Value="{StaticResource LinkNormal}" />
        <Setter Property="TabBarTitleColor"
                Value="{StaticResource LinkNormal}" />
    </Style>

    <Style TargetType="NavigationPage">
        <Setter Property="BarBackgroundColor" Value="{StaticResource BodyBackground}" />
        <Setter Property="BarTextColor" Value="{StaticResource BodyText}" />
        <Setter Property="IconColor" Value="{StaticResource BodyText}" />
    </Style>

    <Style TargetType="TabbedPage">
        <Setter Property="BarBackgroundColor" Value="{StaticResource BodyBackground}" />
        <Setter Property="BarTextColor" Value="{StaticResource LinkNormal}" />
    </Style>

    <Style TargetType="Label">
        <Setter Property="TextColor" Value="{StaticResource PrimaryTextColor}" />
        <Setter Property="FontFamily" Value="SourceCodeProRegular" />
    </Style>

</ResourceDictionary>
